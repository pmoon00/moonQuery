!function(){"use strict";function t(t){if(!t||"object"!=typeof t)return s("No valid conditions"),this;for(var e=[],o=0,n=this.length;n>o;o++){var i=this[o];if(i&&"object"==typeof i){var a=r(i,t);a&&e.push(i)}}return e}function r(t,r){var i=!1;for(var a in r){var c=r[a],s=c.constructor.name,u=t[a];switch(s){case"Object":i=!o(u,c);break;case"Array":i=!e(u,c);break;case"RegExp":i=!n(u,c);break;default:i=!(u==c)}if(i)break}return!i}function e(t,e){for(var o=!1,i=0,a=e.length;a>i;i++){var c=e[i],s=c.constructor.name;if("RegExp"==s&&n(t,c)||t&&"Object"==s&&r(t,c)||c==t){o=!0;break}}return o}function o(t,e){var o=e.$gt,n=e.$lt,i=!f(o),a=!f(n),c=!1;return i&&a?c=t>o&&n>t:i&&!a?c=t>o:a&&!i?c=n>t:a||i||!t||(c=r(t,e)),c}function n(t,r){return r.test(t)}function i(t){if(!t||"object"!=typeof t)return s("No valid mapping"),this;for(var r=[],e=0,o=this.length;o>e;e++){var n=this[e],i={};if(n&&"object"==typeof n){for(var a in t){var c=t[a],u=c===!0?a:c;i[u]=n[a]}r.push(i)}}return 1==r.length?r[0]:r}function a(t){if(!t||"object"!=typeof t)return s("No valid columns"),this;for(var r={},e=null,o=0,n=this.length;n>o;o++){var i=this[o];if(i&&"object"==typeof i)for(var a in t)r[a]=r[a]>0?r[a]+parseFloat(i[a]):parseFloat(i[a])}return e=Object.keys(r),e.length>1?r:r[e[0]]}function c(t,r,e,o){if(p.performanceLogging)var n=(new Date).getTime();var i=e.apply(t,r);if(p.performanceLogging){var a=(new Date).getTime()-n;u("Took "+a+"ms to execute "+o,"Performance Logging")}return i}function s(t,r){console&&console.warn?console.warn("moonQuery%s: %s",r?"["+r+"]":"",t):console&&console.log&&console.log("moonQuery%s: %s",r?"["+r+"]":"",t)}function u(t,r){console&&console.log&&console.log("moonQuery%s: %s",r?"["+r+"]":"",t)}function f(t){return null===t||void 0===t}function l(){Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=e.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var i,a,c=[];for(i in n)t.call(n,i)&&c.push(i);if(r)for(a=0;o>a;a++)t.call(n,e[a])&&c.push(e[a]);return c}}())}var p={performanceLogging:!1};l(),Array.prototype.where=function(){return c(this,arguments,t,"where")},Array.prototype.select=function(){return c(this,arguments,i,"select")},Array.prototype.sum=function(){return c(this,arguments,a,"sum")},Array.prototype.moonQuerySettings=p}();